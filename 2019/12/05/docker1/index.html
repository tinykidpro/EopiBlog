<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>1. Cài đặt docker engine cơ bản (Cài đặt môi trường lab) | Eopi Blog</title><meta name="description" content="1. Cài đặt docker engine cơ bản (Cài đặt môi trường lab)"><meta name="keywords" content="Docker,Virtual Machine"><meta name="author" content="Eopi Noriko"><meta name="copyright" content="Eopi Noriko"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/icon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="1. Cài đặt docker engine cơ bản (Cài đặt môi trường lab)"><meta name="twitter:description" content="1. Cài đặt docker engine cơ bản (Cài đặt môi trường lab)"><meta name="twitter:image" content="https://eopi.loliteam.net/img/docker.png"><meta property="og:type" content="article"><meta property="og:title" content="1. Cài đặt docker engine cơ bản (Cài đặt môi trường lab)"><meta property="og:url" content="https://eopi.loliteam.net/2019/12/05/docker1/"><meta property="og:site_name" content="Eopi Blog"><meta property="og:description" content="1. Cài đặt docker engine cơ bản (Cài đặt môi trường lab)"><meta property="og:image" content="https://eopi.loliteam.net/img/docker.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.css"><link rel="canonical" href="https://eopi.loliteam.net/2019/12/05/docker1/"><link rel="prev" title="2. Các ghi chép cần chú ý về docker" href="/https:/eopi.loliteam.net/2019/12/05/docker2/"><link rel="next" title="5. Cài đặt và cấu hinh Wazuh agent" href="/https:/eopi.loliteam.net/2019/12/05/Wazuh5/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"Chúng tôi không tìm thấy bất kỳ kết quả nào cho tìm kiếm: ${query}"}},
  translate: undefined,
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: 'Sao chép thành công',
    error: 'Sao chép lỗi',
    noSupport: 'Trình duyệt không hỗ trợ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Nhấn',
    message_next: 'để đánh dấu trang này'
  },
  runtime_unit: 'days',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: {"text":"Eopi,LoLi,Shiina","fontSize":"15px"},
  medium_zoom: 'true',
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"Nhấn","message_next":"để đánh dấu trang này"},"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Light Mode Activated Manually","night_to_day":"Dark Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"}
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Eopi Blog</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> Search</span></a></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">14</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">9</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Mục lục</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Huong-dan-cai-dat-Docker"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Hướng dẫn cài đặt Docker</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MUC-LUC"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">MỤC LỤC</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Cai-dat-docker-engine"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">Cài đặt docker engine</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Cai-ban-stable-moi-nhat"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">Cài bản stable mới nhất</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Mot-so-thao-tac-de-trai-nghiem-docker-sau-khi-cai-dat"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">Một số thao tác để trải nghiệm docker sau khi cài đặt</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Chay-mot-container"><span class="toc_mobile_items-number">1.2.2.1.</span> <span class="toc_mobile_items-text">Chạy một container</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Thao-tac-voi-mot-container-voi-che-do-tuong-tac-su-dung-tuy-chon-it"><span class="toc_mobile_items-number">1.2.2.2.</span> <span class="toc_mobile_items-text">Thao tác với một container với chế độ tương tác, sử dụng tùy chọn -it</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Tao-mot-container-voi-che-do-deamon-su-dung-tuy-chon-d"><span class="toc_mobile_items-number">1.2.2.3.</span> <span class="toc_mobile_items-text">Tạo một container với chế độ deamon, sử dụng tùy chọn -d</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Tao-mot-container-voi-port-chi-dinh-su-dung-tuy-chon-p"><span class="toc_mobile_items-number">1.2.2.4.</span> <span class="toc_mobile_items-text">Tạo một container với port chỉ định, sử dụng tùy chọn -p</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Thao-tac-voi-mot-container-da-ton-tai"><span class="toc_mobile_items-number">1.2.2.5.</span> <span class="toc_mobile_items-text">Thao tác với một container đã tồn tại</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Chi-dinh-RAM-va-CPU-cho-mot-container"><span class="toc_mobile_items-number">1.2.2.6.</span> <span class="toc_mobile_items-text">Chỉ định RAM và CPU cho một container</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Lenh-xem-noi-dung-cua-mot-container-xem-log-va-kiem-tra-port"><span class="toc_mobile_items-number">1.2.2.7.</span> <span class="toc_mobile_items-text">Lệnh xem nội dung của một container, xem log và kiểm tra port</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Cac-lenh-xoa-cac-container"><span class="toc_mobile_items-number">1.2.2.8.</span> <span class="toc_mobile_items-text">Các lệnh xóa các container.</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><div id="web_bg" data-type="color"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Mục lục</div><div class="sidebar-toc__progress"><span class="progress-notice">Bạn đã đọc</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Huong-dan-cai-dat-Docker"><span class="toc-number">1.</span> <span class="toc-text">Hướng dẫn cài đặt Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MUC-LUC"><span class="toc-number">1.1.</span> <span class="toc-text">MỤC LỤC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cai-dat-docker-engine"><span class="toc-number">1.2.</span> <span class="toc-text">Cài đặt docker engine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cai-ban-stable-moi-nhat"><span class="toc-number">1.2.1.</span> <span class="toc-text">Cài bản stable mới nhất</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mot-so-thao-tac-de-trai-nghiem-docker-sau-khi-cai-dat"><span class="toc-number">1.2.2.</span> <span class="toc-text">Một số thao tác để trải nghiệm docker sau khi cài đặt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Chay-mot-container"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">Chạy một container</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Thao-tac-voi-mot-container-voi-che-do-tuong-tac-su-dung-tuy-chon-it"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">Thao tác với một container với chế độ tương tác, sử dụng tùy chọn -it</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Tao-mot-container-voi-che-do-deamon-su-dung-tuy-chon-d"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">Tạo một container với chế độ deamon, sử dụng tùy chọn -d</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Tao-mot-container-voi-port-chi-dinh-su-dung-tuy-chon-p"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">Tạo một container với port chỉ định, sử dụng tùy chọn -p</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Thao-tac-voi-mot-container-da-ton-tai"><span class="toc-number">1.2.2.5.</span> <span class="toc-text">Thao tác với một container đã tồn tại</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Chi-dinh-RAM-va-CPU-cho-mot-container"><span class="toc-number">1.2.2.6.</span> <span class="toc-text">Chỉ định RAM và CPU cho một container</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lenh-xem-noi-dung-cua-mot-container-xem-log-va-kiem-tra-port"><span class="toc-number">1.2.2.7.</span> <span class="toc-text">Lệnh xem nội dung của một container, xem log và kiểm tra port</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cac-lenh-xoa-cac-container"><span class="toc-number">1.2.2.8.</span> <span class="toc-text">Các lệnh xóa các container.</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/docker.png)"><div id="post-info"><div id="post-title"><div class="posttitle">1. Cài đặt docker engine cơ bản (Cài đặt môi trường lab)</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2019-12-05<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2019-12-06</time><div class="post-meta-wordcount"><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>Post View: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="Huong-dan-cai-dat-Docker"><a href="#Huong-dan-cai-dat-Docker" class="headerlink" title="Hướng dẫn cài đặt Docker"></a>Hướng dẫn cài đặt Docker</h1><h2 id="MUC-LUC"><a href="#MUC-LUC" class="headerlink" title="MỤC LỤC"></a>MỤC LỤC</h2><ul>
<li>Cài đặt docker engine</li>
<li>Các thao tác cơ bản sau khi cài đặt docker.<ul>
<li>Thực thi một container.</li>
<li>Thao tác với một container với chế độ tương tác, sử dụng tùy chọn <code>-it</code>.</li>
<li>Tạo một container với chế độ deamon, sử dụng tùy chọn <code>-d</code>.</li>
<li>Tạo một container với port chỉ định, sử dụng tùy chọn <code>-p</code>.</li>
<li>Thao tác với một container đã tồn tại.</li>
<li>Chỉ định RAM và CPU cho một container. </li>
<li>Lệnh xem nội dung của một container, xem log và kiểm tra port</li>
<li>Các lệnh xóa các container.</li>
</ul>
</li>
</ul>
<h2 id="Cai-dat-docker-engine"><a href="#Cai-dat-docker-engine" class="headerlink" title="Cài đặt docker engine"></a>Cài đặt docker engine</h2><h3 id="Cai-ban-stable-moi-nhat"><a href="#Cai-ban-stable-moi-nhat" class="headerlink" title="Cài bản stable mới nhất"></a>Cài bản stable mới nhất</h3><ul>
<li><p>Các OS áp dụng: CentOS 7.3 64bit, Ubuntu 14.04 64bit, Ubuntu 16.04 64bit</p>
</li>
<li><p>Đăng nhập với quyên <code>root</code> và thực hiện lệnh dưới để cài đặt. Đảm bảo máy có kết nối internet.</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">su - </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.docker.com/ | sudo sh</span></pre></td></tr></table></figure>
<ul>
<li>Kết quả của lệnh trên như bên dưới  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">	If you would like to use Docker as a non-root user, you should now consider</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">adding your user to the <span class="string">"docker"</span> group with something like:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">	sudo usermod -aG docker your-user</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">Remember that you will have to <span class="built_in">log</span> out and back <span class="keyword">in</span> <span class="keyword">for</span> this to take effect!</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">WARNING: Adding a user to the <span class="string">"docker"</span> group will grant the ability to run</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">				 containers <span class="built_in">which</span> can be used to obtain root privileges on the</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">				 docker host.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">				 Refer to https://docs.docker.com/engine/security/security/<span class="comment">#docker-daemon-attack-surface</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">				 <span class="keyword">for</span> more information.</span></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Thực hiện lệnh dưới để phân quyền cho user hiện tại thuộc group <code>docker</code></p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker `whoami`</span></pre></td></tr></table></figure>
</li>
<li><p>Kích hoạt docker sau khi cài đặt xong và cho phép khởi động cùng OS</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">systemctl start docker.service</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> docker.service</span></pre></td></tr></table></figure>
</li>
<li><p>Kiểm tra trạng thái của docker sau khi khởi động</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">systemctl status docker.service</span></pre></td></tr></table></figure>
<ul>
<li>Kết quả lệnh trên như dưới là ok  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker.service - Docker Application Container Engine</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">	 Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; vendor preset: disabled)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">	 Active: active (running) since Wed 2017-09-06 21:54:07 +07; 31s ago</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">		 Docs: https://docs.docker.com</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"> Main PID: 2194 (dockerd)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">	 CGroup: /system.slice/docker.service</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">					 ├─2194 /usr/bin/dockerd</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">					 └─2200 docker-containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --metrics-interval=0 --start-timeout 2m --state-dir /var/run/<span class="keyword">do</span>...</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">Sep 06 21:54:05 docker1 dockerd[2194]: time=<span class="string">"2017-09-06T21:54:05.324752580+07:00"</span> level=warning msg=<span class="string">"failed to rename /var/lib/docker/tmp for background...hronously"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">Sep 06 21:54:05 docker1 dockerd[2194]: time=<span class="string">"2017-09-06T21:54:05.421102352+07:00"</span> level=warning msg=<span class="string">"overlay: the backing xfs filesystem is formatted without d_ty...</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="string">Sep 06 21:54:05 docker1 dockerd[2194]: time="</span>2017-09-06T21:54:05.541746640+07:00<span class="string">" level=info msg="</span>Graph migration to content-addressability took 0.00 seconds<span class="string">"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="string">Sep 06 21:54:05 docker1 dockerd[2194]: time="</span>2017-09-06T21:54:05.544930723+07:00<span class="string">" level=info msg="</span>Loading containers: start.<span class="string">"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"><span class="string">Sep 06 21:54:06 docker1 dockerd[2194]: time="</span>2017-09-06T21:54:06.931709192+07:00<span class="string">" level=info msg="</span>Default bridge (docker0) is assigned with an IP addres...P address<span class="string">"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"><span class="string">Sep 06 21:54:07 docker1 dockerd[2194]: time="</span>2017-09-06T21:54:07.880341611+07:00<span class="string">" level=info msg="</span>Loading containers: <span class="keyword">done</span>.<span class="string">"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="string">Sep 06 21:54:07 docker1 dockerd[2194]: time="</span>2017-09-06T21:54:07.934858409+07:00<span class="string">" level=info msg="</span>Docker daemon<span class="string">" commit=8784753 graphdriver(s)=overlay v...17.07.0-ce</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="string">Sep 06 21:54:07 docker1 dockerd[2194]: time="</span>2017-09-06T21:54:07.936237331+07:00<span class="string">" level=info msg="</span>Daemon has completed initialization<span class="string">"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="string">Sep 06 21:54:07 docker1 dockerd[2194]: time="</span>2017-09-06T21:54:07.983301268+07:00<span class="string">" level=info msg="</span>API listen on /var/run/docker.sock<span class="string">"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="string">Sep 06 21:54:07 docker1 systemd[1]: Started Docker Application Container Engine.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"><span class="string">Hint: Some lines were ellipsized, use -l to show in full.</span></span></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Kiểm tra phiên bản của docker sau khi cài đặt, trong hướng dẫn này là bản 17.07.0-ce</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker version</span></pre></td></tr></table></figure>
<ul>
<li>Kết quả như sau:   <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">		Client:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">		 Version:      17.07.0-ce</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">		 API version:  1.31</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">		 Go version:   go1.8.3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">		 Git commit:   8784753</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">		 Built:        Tue Aug 29 17:42:01 2017</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">		 OS/Arch:      linux/amd64</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">		Server:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">		 Version:      17.07.0-ce</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">		 API version:  1.31 (minimum version 1.12)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">		 Go version:   go1.8.3</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">		 Git commit:   8784753</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">		 Built:        Tue Aug 29 17:43:23 2017</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">		 OS/Arch:      linux/amd64</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">		 Experimental: <span class="literal">false</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">		``` </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">- Kiểm tra xem docker đã hoạt động hay chưa</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">	```sh</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">	docker pull hello-world</span></pre></td></tr></table></figure></li>
<li>Kết quả như sau:  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Using default tag: latest</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">latest: Pulling from library/hello-world</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">b04784fba78d: Pull complete</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">Digest: sha256:f3b3b28a45160805bb16542c9531888519430e9e6d6ffc09d72261b0d26ff74f</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Thử tạo container đầu tiên</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker run hello-world</span></pre></td></tr></table></figure>
<ul>
<li>Kết quả như sau:   <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Hello from Docker!</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">This message shows that your installation appears to be working correctly.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">To generate this message, Docker took the following steps:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"> 1. The Docker client contacted the Docker daemon.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"> 2. The Docker daemon pulled the <span class="string">"hello-world"</span> image from the Docker Hub.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">		executable that produces the output you are currently reading.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">		to your terminal.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"> $ docker run -it ubuntu bash</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">Share images, automate workflows, and more with a free Docker ID:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"> https://cloud.docker.com/</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">For more examples and ideas, visit:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"> https://docs.docker.com/engine/userguide/</span></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Kết thúc việc cài đặt, nếu kết quả ổn thì bạn đã có thể bắt đầu tìm hiểu về docker.</p>
</li>
</ul>
<h3 id="Mot-so-thao-tac-de-trai-nghiem-docker-sau-khi-cai-dat"><a href="#Mot-so-thao-tac-de-trai-nghiem-docker-sau-khi-cai-dat" class="headerlink" title="Một số thao tác để trải nghiệm docker sau khi cài đặt"></a>Một số thao tác để trải nghiệm docker sau khi cài đặt</h3><p>Sau khi cài đặt docker xong, bạn nên trải nghiệm cách sử dụng docker với các thao tác cơ bản trước khi đi vào chi tiết của từng thành phần.</p>
<h4 id="Chay-mot-container"><a href="#Chay-mot-container" class="headerlink" title="Chạy một container"></a>Chạy một container</h4><p>Chạy một container tức là khởi chạy một ứng dụng nào đó trong container. Hãy thực hiện các lệnh dưới và cùng đối chiếu kết kết quả.</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker run busybox <span class="built_in">echo</span> <span class="string">'Xin chao'</span></span></pre></td></tr></table></figure>

<ul>
<li><p>Kết quả: Màn hình sẽ trả về dòng thông báo ở trên. </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Xin chao</span></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker run busybox whoami</span></pre></td></tr></table></figure></li>
<li><p>Kết quả: Lệnh <code>whoami</code> sẽ được thực hiện trong container và đưa thông báo ra bên ngoài.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">root</span></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker run busybox route</span></pre></td></tr></table></figure></li>
<li><p>Kết quả:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Kernel IP routing table</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">default         172.17.0.1      0.0.0.0         UG    0      0        0 eth0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">172.17.0.0      *               255.255.0.0     U     0      0        0 eth0</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">root@devstack01:~<span class="comment">#</span></span></pre></td></tr></table></figure>

</li>
</ul>
<ul>
<li><p>Chúng ta có thể thấy cú pháp của 03 lệnh trên là <code>docker run &lt;ten_image&gt; &lt;cau_lenh_duoc_thuc_hien&gt;</code>. Trong đó:</p>
<ul>
<li><code>docker</code>: là tên lệnh để máy cài docker thực hiện thao tác với docker bằng CLI.</li>
<li><code>run</code>: là tùy chọn để thực hiện, ngoài <code>run</code> còn nhất nhiều các tùy chọn khác như <code>images, pull, rmi ...</code>, chúng ta sẽ khám phá sau.</li>
<li><code>busybox</code>: là tên images dùng để tạo các container.</li>
<li><code>echo, whoami, route</code>: là các lệnh sẽ được truyền vào trong container thực hiện.</li>
</ul>
</li>
<li><p>Ta cũng để ý, khi thực hiện lệnh <code>docker run</code> thì máy sẽ tiến hành tìm kiếm images được chỉ định trong localhost, nếu không có thì mặc nó sẽ thực hiện <code>pulled</code> từ registry Docker Hub về máy cài docker. Registry Docker Hub là một <code>kho</code> lưu trữ các images. Ta cũng có thể sử dụng một registry local - tức là một registry offline trong nội bộ mạng LAN.</p>
</li>
</ul>
<h4 id="Thao-tac-voi-mot-container-voi-che-do-tuong-tac-su-dung-tuy-chon-it"><a href="#Thao-tac-voi-mot-container-voi-che-do-tuong-tac-su-dung-tuy-chon-it" class="headerlink" title="Thao tác với một container với chế độ tương tác, sử dụng tùy chọn -it"></a>Thao tác với một container với chế độ tương tác, sử dụng tùy chọn <code>-it</code></h4><ul>
<li><p>Trong các ví dụ trước ta mới thao tác để thực thi nhanh với các container, trong phần này ta sẽ sử dụng cách tương tác với một container. Có nghĩa là tạo ra các container và thao tác trực tiếp với chúng. Hãy chạy lệnh dưới.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker run -it busybox</span></pre></td></tr></table></figure>

</li>
</ul>
<p>Trong lệnh trên ta sử dụng tùy chọn <code>-it</code> - đây chính là tùy chọn cho phép tương tác trực tiếp trong container, kết quả ta sẽ nhận được cửa sổ thao tác trong container như sau.</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">root@devstack01:~<span class="comment"># docker run -it busybox</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">/ <span class="comment"># echo "Chao cac ban"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">Chao cac ban</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">/ <span class="comment">#</span></span></pre></td></tr></table></figure>
<ul>
<li>Trong mục trên các bạn có thể thấy ta đã thực hiện lệnh <code>echo &quot;Chao cac ban&quot;</code> và kết quả hiển thị ra màn hình. Để thoát khỏi chế độ tương tác với container ta dùng lệnh <code>exit</code>/<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">root@devstack01:~<span class="comment"># docker run -it busybox</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">/ <span class="comment"># echo "Chao cac ban"</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">Chao cac ban</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">/ <span class="comment"># exit</span></span></pre></td></tr></table></figure>

</li>
</ul>
<p>Trong phần trên ta đã sử dụng tùy chọn <code>-it</code>, trong đó <code>-i</code> là tùy chọn sử dụng để tạo container với chế độ tương tác, tùy chọn <code>-t</code> là tùy chọn mở ra một phiên làm việc. Nếu chỉ sử dụng tùy chọn <code>-i</code> thì chúng ta sẽ mở ra một section và đóng lại luôn. Nếu sử dụng chỉ tùy chọn <code>-t</code> thì sẽ mở ra một section và không thao tác được.</p>
<h4 id="Tao-mot-container-voi-che-do-deamon-su-dung-tuy-chon-d"><a href="#Tao-mot-container-voi-che-do-deamon-su-dung-tuy-chon-d" class="headerlink" title="Tạo một container với chế độ deamon, sử dụng tùy chọn -d"></a>Tạo một container với chế độ deamon, sử dụng tùy chọn <code>-d</code></h4><p>Thông thường, khi tạo một container với các tùy chọn trước thì sau khi tạo xong hoặc thoát container thì ngay lập tức container đó sẽ dừng hoạt động. Trong một số trường hợp ta sẽ cần các container chạy ngầm, trong trường hợp này ta sử dụng tùy chọn <code>-d</code>.</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker run -d httpd</span></pre></td></tr></table></figure>

<p>Sau khi chạy lệnh trên xong, ta có thể sử dụng lệnh <code>docker ps</code> để xem container này còn hoạt động hay không (nếu để quan sát cả container đã dừng thì dùng lệnh <code>docker ps -a</code>).</p>
<ul>
<li><p>Kết quả lệnh <code>docker ps</code>. Chú ý quan sát cột <code>STATUS</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS               NAMES</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">4522587672e0        httpd               <span class="string">"httpd-foreground"</span>   4 seconds ago       Up 3 seconds        80/tcp              modest_perlman</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">root@devstack01:~<span class="comment">#</span></span></pre></td></tr></table></figure>
</li>
<li><p>Kết quả lệnh <code>docker ps -a</code>.Chú ý quan sát cột <code>STATUS</code>. Ta thấy trước đó có các container đã được tạo mà không có tùy chọn <code>-d</code> đang có status là <code>Exited</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">root@devstack01:~<span class="comment"># docker ps -a</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND                 CREATED             STATUS                           PORTS               NAMES</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">4522587672e0        httpd               <span class="string">"httpd-foreground"</span>      58 seconds ago      Up 57 seconds                    80/tcp              modest_perlman</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">30b7e0f132af        busybox             <span class="string">"sh"</span>                    33 minutes ago      Exited (0) 32 minutes ago                            cocky_leakey</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">a0075342c64f        busybox             <span class="string">"route"</span>                 41 minutes ago      Exited (0) 41 minutes ago                            youthful_lovelace</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">ab55d78fa2c9        httpd               <span class="string">"httpd-foreground"</span>      About an hour ago   Exited (0) About a minute ago                        elated_brahmagupta</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">6bf88da1f473        httpd               <span class="string">"httpd-foreground"</span>      About an hour ago   Exited (0) About a minute ago                        loving_curie</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">46fe544a7d20        httpd               <span class="string">"httpd-foreground"</span>      About an hour ago   Exited (0) About a minute ago                        compassionate_hugle</span></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="Tao-mot-container-voi-port-chi-dinh-su-dung-tuy-chon-p"><a href="#Tao-mot-container-voi-port-chi-dinh-su-dung-tuy-chon-p" class="headerlink" title="Tạo một container với port chỉ định, sử dụng tùy chọn -p"></a>Tạo một container với port chỉ định, sử dụng tùy chọn <code>-p</code></h4><p>Nếu không chỉ định tùy chọn <code>-p</code> cho container thì thường container sinh ra sẽ có một port mặc định nào đó, lúc đó ta muốn sử dụng container đó thì phải đứng ở máy chứa container và thao tác, ví dụ như ta có một container chạy ứng dụng web, lúc đó ta có thể truy cập tới ứng dụng web trên máy cài đặt container với port của container được sinh ra mặc định.</p>
<p>Do vậy, để <code>phơi</code> một port của container ra bên ngoài - giúp các máy ngoài container có thể sử dụng được thì ta cần dùng tùy chọn <code>-p</code>. Ở ví dụ dưới ta sẽ tạo ra một container chạy web và ánh xạ port 4000 của máy host tới port 80 của container được sinh ra.</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker run -d -p 4000:80 httpd</span></pre></td></tr></table></figure>

<ul>
<li><p>Sử dụng lệnh <code>docker ps</code>, ta có thể quan sát cột <code>PORTS</code> để thấy thông số ánh xạ port giữa host (Máy cái docker) và container </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS                  NAMES</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">4594542ec71b        httpd               <span class="string">"httpd-foreground"</span>   40 seconds ago      Up 39 seconds       0.0.0.0:4000-&gt;80/tcp   goofy_euler</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">4522587672e0        httpd               <span class="string">"httpd-foreground"</span>   8 minutes ago       Up 8 minutes        80/tcp                 modest_perlman</span></pre></td></tr></table></figure>


</li>
</ul>
<p>Khi đó ta có thể đứng ở các máy bên ngoài và truy cập web với địa chỉ <code>http://ip_may_cai_docker:4000</code>, kết quả là ta sẽ thấy nội dung của web. Hoặc ta có thể đứng trên máy cài docker và sử dụng lệnh <code>ss -lan | grep 4000</code>, kết quả ta sẽ thấy port 4000 trên host cài docker.</p>
<pre><code><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">root@devstack01:~<span class="comment"># ss -lan | grep 4000</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">tcp    LISTEN     0      128      :::4000                 :::*</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">root@devstack01:~<span class="comment">#</span></span></pre></td></tr></table></figure></code></pre><p>Ngoài cách mở trình duyệt vào địa chỉ, ta có thể sử dụng lệnh <code>curl localhost:4000</code> trên ngay máy cài docker, ta sẽ có kết quả trả về như bên dưới.</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">root@devstack01:~<span class="comment"># curl localhost:4000</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</span></pre></td></tr></table></figure>

<ul>
<li><p>Trong trường hợp một container có nhiều port, ta cần sử dụng nhiều port thì có thể sử dùng tùy chọn <code>-p 4000:80 8081:3306</code>.</p>
</li>
<li><p>Trong trường hợp ta muốn ánh xạ port ngẫu nhiên cho toàn bộ các port có sẵn trong container, ta sử dụng tùy chọn <code>-P</code>, ví dụ</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker run -d -P nginx</span></pre></td></tr></table></figure>

<ul>
<li>Sử dụng lệnh <code>docker ps</code> để xem container đang được ánh xạ port nào.<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">root@devstack01:~<span class="comment"># docker ps</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                   NAMES</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">8be19991391d        nginx               <span class="string">"nginx -g 'daemon of…"</span>   29 seconds ago      Up 27 seconds       0.0.0.0:32769-&gt;80/tcp   suspicious_bhaskara</span></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="Thao-tac-voi-mot-container-da-ton-tai"><a href="#Thao-tac-voi-mot-container-da-ton-tai" class="headerlink" title="Thao tác với một container đã tồn tại"></a>Thao tác với một container đã tồn tại</h4><ul>
<li><p>Khi một container đang ở trạng thái <code>UP</code> thì ta có thể truy cập vào để thao thác, giả sử như ta có container với ID là <code>8be19991391d</code>, để truy cập vào trong container đó ta dùng lệnh <code>docker exec -it &lt;ID_Container&gt; /bin/bash</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it 8be19991391d /bin/bash</span></pre></td></tr></table></figure>
<ul>
<li>Kết quả: lưu ý ta có thể quan sát cửa sổ nhắc lệnh <code>root@8be19991391d</code><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">root@8be19991391d:/<span class="comment">#</span></span></pre></td></tr></table></figure>
Để thoát khỏi container ta sử dụng lệnh <code>exit</code></li>
</ul>
</li>
</ul>
<h4 id="Chi-dinh-RAM-va-CPU-cho-mot-container"><a href="#Chi-dinh-RAM-va-CPU-cho-mot-container" class="headerlink" title="Chỉ định RAM và CPU cho một container"></a>Chỉ định RAM và CPU cho một container</h4><ul>
<li>Một container có thể chỉ định lượng RAM và CPU khi tạo.<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker run -d -p 4000:80 --name webserver --memory 400m --cpus 0.5 httpd</span></pre></td></tr></table></figure>

</li>
</ul>
<p>Trong ví dụ trên:</p>
<ul>
<li><code>--memory</code>: là giá trị RAM gán cho container.</li>
<li><code>--cpus</code>: là giá trị CPU gán cho container.</li>
<li><code>--name</code>: tên của container. </li>
</ul>
<h4 id="Lenh-xem-noi-dung-cua-mot-container-xem-log-va-kiem-tra-port"><a href="#Lenh-xem-noi-dung-cua-mot-container-xem-log-va-kiem-tra-port" class="headerlink" title="Lệnh xem nội dung của một container, xem log và kiểm tra port"></a>Lệnh xem nội dung của một container, xem log và kiểm tra port</h4><ul>
<li><p>Container có thông tin có thể xem được, trong đó chứa rất nhiều tham số có thể khai thác được, để xem nội dung của container ta kiểm tra bằng lệnh <code>docker inspect &lt;ten_hoac_ID_Container&gt;</code>, ví dụ </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker inspect 459c2c5f8d32</span></pre></td></tr></table></figure>
</li>
<li><p>Để xem log của một container ta sử dụng lệnh <code>docker logs -f &lt;ten_hoac_ID_Container&gt;</code>  </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker logs -f 459c2c5f8d32</span></pre></td></tr></table></figure>
</li>
<li><p>Kiểm tra port của một container </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker port 459c2c5f8d32</span></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="Cac-lenh-xoa-cac-container"><a href="#Cac-lenh-xoa-cac-container" class="headerlink" title="Các lệnh xóa các container."></a>Các lệnh xóa các container.</h4><ul>
<li><p>Để xóa các container ta sử dụng lệnh <code>docker rm &lt;ten_hoac_ID_Container&gt;</code> hoặc <code>docker rm -f &lt;ten_hoac_ID_Container&gt;</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker rm 459c2c5f8d32</span></pre></td></tr></table></figure>
<p>hoặc </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker rm 459c2c5f8d32</span></pre></td></tr></table></figure>
</li>
<li><p>Có thể sử dụng thủ thuật dưới để xóa toàn bộ các container </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">docker rm -f `docker ps -aq`</span></pre></td></tr></table></figure></li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:thuong@adminvietnam.org" target="_blank" rel="noopener">Eopi Noriko</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="/https:/eopi.loliteam.net/2019/12/05/docker1/">https://eopi.loliteam.net/2019/12/05/docker1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker    </a><a class="post-meta__tags" href="/tags/Virtual-Machine/">Virtual Machine    </a></div><div class="post_share"><div class="social-share" data-image="/img/docker.png" data-sites="facebook,twitter"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/12/05/docker2/"><img class="prev_cover lazyload" data-src="/img/docker.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Bài đăng trước</div><div class="prev_info"><span>2. Các ghi chép cần chú ý về docker</span></div></a></div><div class="next-post pull_right"><a href="/2019/12/05/Wazuh5/"><img class="next_cover lazyload" data-src="/img/wazuh.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Bài tiếp theo</div><div class="next_info"><span>5. Cài đặt và cấu hinh Wazuh agent</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/12/05/docker2/" title="2. Các ghi chép cần chú ý về docker"><img class="relatedPosts_cover lazyload"data-src="/img/docker.png"><div class="relatedPosts_title">2. Các ghi chép cần chú ý về docker</div></a></div><div class="relatedPosts_item"><a href="/2019/12/05/docker3/" title="3. Docker image"><img class="relatedPosts_cover lazyload"data-src="/img/docker.png"><div class="relatedPosts_title">3. Docker image</div></a></div><div class="relatedPosts_item"><a href="/2019/12/05/docker4/" title="4. Viết dockerfile để build image"><img class="relatedPosts_cover lazyload"data-src="/img/docker.png"><div class="relatedPosts_title">4. Viết dockerfile để build image</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer" style="background-image: url(/img/docker.png)"><div id="footer-wrap"><div class="copyright">&copy;2019 By Eopi Noriko</div><div class="framework-info"><span>Power by </span><a href="https://loliteam.net" target="_blank" rel="noopener"><span>LoLi Team</span></a><span class="footer-separator">|</span><span>Build by </span><a href="https://facebook.com/Thuong.EoPi" target="_blank" rel="noopener"><span>Eopi Noriko</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script async src="/js/search/local-search.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.7" zIndex="-1" mobile="true" data-click="true"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/click_heart.js"></script><script src="/js/third-party/ClickShowText.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Tìm Kiếm</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Tìm kiếm Bài viết"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>