<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>5. Cài đặt và cấu hinh Wazuh agent | Eopi Blog</title><meta name="description" content="5. Cài đặt và cấu hinh Wazuh agent"><meta name="keywords" content="Wazuh,SOC,SIEM,IDS/IPS"><meta name="author" content="Eopi Noriko"><meta name="copyright" content="Eopi Noriko"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="5. Cài đặt và cấu hinh Wazuh agent"><meta name="twitter:description" content="5. Cài đặt và cấu hinh Wazuh agent"><meta name="twitter:image" content="https://eopi.loliteam.net/img/wazuh.png"><meta property="og:type" content="article"><meta property="og:title" content="5. Cài đặt và cấu hinh Wazuh agent"><meta property="og:url" content="https://eopi.loliteam.net/2019/12/05/Wazuh5/"><meta property="og:site_name" content="Eopi Blog"><meta property="og:description" content="5. Cài đặt và cấu hinh Wazuh agent"><meta property="og:image" content="https://eopi.loliteam.net/img/wazuh.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.css"><link rel="canonical" href="https://eopi.loliteam.net/2019/12/05/Wazuh5/"><link rel="prev" title="1. Cài đặt docker engine cơ bản (Cài đặt môi trường lab)" href="/https:/eopi.loliteam.net/2019/12/05/docker1/"><link rel="next" title="4. Thực hành cài đặt Wazuh Server" href="/https:/eopi.loliteam.net/2019/12/05/Wazuh4/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"Chúng tôi không tìm thấy bất kỳ kết quả nào cho tìm kiếm: ${query}"}},
  translate: undefined,
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: 'Sao chép thành công',
    error: 'Sao chép lỗi',
    noSupport: 'Trình duyệt không hỗ trợ'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Nhấn',
    message_next: 'để đánh dấu trang này'
  },
  runtime_unit: 'days',
  copyright: undefined,
  copy_copyright_js: false,
  ClickShowText: {"text":"Eopi,LoLi,Shiina","fontSize":"15px"},
  medium_zoom: 'true',
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"Nhấn","message_next":"để đánh dấu trang này"},"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Light Mode Activated Manually","night_to_day":"Dark Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"}
  
}</script></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Eopi Blog</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> Search</span></a></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">14</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">9</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Mục lục</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-Cai-dat-Wazuh-agent"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">1. Cài đặt Wazuh agent</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-1-Cai-dat-Wazuh-agent-tren-Debian-Ubuntu"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">1.1. Cài đặt Wazuh agent trên Debian/Ubuntu</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-2-Cai-dat-Wazuh-agent-tren-Centos-RHEL"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">1.2. Cài đặt Wazuh-agent trên Centos/RHEL</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-3-Voi-agent-la-Windows"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">1.3. Với agent là Windows</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-Tien-trinh-registration-tai-agent"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">2. Tiến trình registration tại agent</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-Register-cho-cac-Agent"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">3. Register cho các Agent</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-List-cac-agent-duoc-cai-dat-va-remove-agent"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">4. List các agent được cài đặt và remove agent</span></a></li></ol></div></div><div id="body-wrap"><div id="web_bg" data-type="color"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Mục lục</div><div class="sidebar-toc__progress"><span class="progress-notice">Bạn đã đọc</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Cai-dat-Wazuh-agent"><span class="toc-number">1.</span> <span class="toc-text">1. Cài đặt Wazuh agent</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-Cai-dat-Wazuh-agent-tren-Debian-Ubuntu"><span class="toc-number">1.1.</span> <span class="toc-text">1.1. Cài đặt Wazuh agent trên Debian/Ubuntu</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Cai-dat-Wazuh-agent-tren-Centos-RHEL"><span class="toc-number">1.2.</span> <span class="toc-text">1.2. Cài đặt Wazuh-agent trên Centos/RHEL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-Voi-agent-la-Windows"><span class="toc-number">1.3.</span> <span class="toc-text">1.3. Với agent là Windows</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Tien-trinh-registration-tai-agent"><span class="toc-number">2.</span> <span class="toc-text">2. Tiến trình registration tại agent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Register-cho-cac-Agent"><span class="toc-number">3.</span> <span class="toc-text">3. Register cho các Agent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-List-cac-agent-duoc-cai-dat-va-remove-agent"><span class="toc-number">4.</span> <span class="toc-text">4. List các agent được cài đặt và remove agent</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/wazuh.png)"><div id="post-info"><div id="post-title"><div class="posttitle">5. Cài đặt và cấu hinh Wazuh agent</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2019-12-05<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2019-12-05</time><div class="post-meta-wordcount"><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>Post View: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="1-Cai-dat-Wazuh-agent"><a href="#1-Cai-dat-Wazuh-agent" class="headerlink" title="1. Cài đặt Wazuh agent"></a>1. Cài đặt Wazuh agent</h2><h3 id="1-1-Cai-dat-Wazuh-agent-tren-Debian-Ubuntu"><a href="#1-1-Cai-dat-Wazuh-agent-tren-Debian-Ubuntu" class="headerlink" title="1.1. Cài đặt Wazuh agent trên Debian/Ubuntu"></a>1.1. Cài đặt Wazuh agent trên Debian/Ubuntu</h3><p>Thêm Wazuh repo </p>
<ul>
<li><p>Cài đặt các gói bổ trợ :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">apt-get install curl apt-transport-https lsb-release -y</span></pre></td></tr></table></figure>
</li>
<li><p>Install Wazuh repo GPG key :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">curl -s https://packages.wazuh.com/key/GPG-KEY-WAZUH | apt-key add -</span></pre></td></tr></table></figure>
</li>
<li><p>Tìm tên của OS và thêm vào repo</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"deb https://packages.wazuh.com/3.x/apt/ stable main"</span> | tee /etc/apt/sources.list.d/wazuh.list</span></pre></td></tr></table></figure>
</li>
<li><p>Update thông tin package</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">apt-get update -y</span></pre></td></tr></table></figure>
</li>
<li><p>Install Wazuh agent</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">apt-get install wazuh-agent -y</span></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="1-2-Cai-dat-Wazuh-agent-tren-Centos-RHEL"><a href="#1-2-Cai-dat-Wazuh-agent-tren-Centos-RHEL" class="headerlink" title="1.2. Cài đặt Wazuh-agent trên Centos/RHEL"></a>1.2. Cài đặt Wazuh-agent trên Centos/RHEL</h3><ul>
<li><p>Thêm repo với Centos :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/yum.repos.d/wazuh.repo &lt;&lt;\EOF</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[wazuh_repo]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">gpgcheck=1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">gpgkey=https://packages.wazuh.com/key/GPG-KEY-WAZUH</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">enabled=1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">name=Wazuh repository</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">baseurl=https://packages.wazuh.com/3.x/yum/</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">protect=1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">EOF</span></pre></td></tr></table></figure>
</li>
<li><p>Thêm repo với Centos-5 :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/yum.repos.d/wazuh.repo &lt;&lt;\EOF</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">[wazuh_repo]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">gpgcheck=1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">gpgkey=http://packages.wazuh.com/key/GPG-KEY-WAZUH-5</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">enabled=1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">name=Wazuh repository</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">baseurl=http://packages.wazuh.com/3.x/yum/5/</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">protect=1</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">EOF</span></pre></td></tr></table></figure>
</li>
<li><p>Cài đặt Wazuh agent </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">yum install wazuh-agent -y</span></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="1-3-Voi-agent-la-Windows"><a href="#1-3-Voi-agent-la-Windows" class="headerlink" title="1.3. Với agent là Windows"></a>1.3. Với agent là Windows</h3><ul>
<li><p>Dowload package từ source : <a href="https://documentation.wazuh.com/current/installation-guide/packages-list/index.html" target="_blank" rel="noopener">https://documentation.wazuh.com/current/installation-guide/packages-list/index.html</a></p>
</li>
<li><p><strong>Cách 1</strong>: Sử dụng cmd để cài đặt :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">wazuh-agent-3.6.1-1.msi /q</span></pre></td></tr></table></figure>
</li>
<li><p><strong>Cách 2</strong> : Sử dụng GUI : Double-click vào file dowload và cài đặt với mặc định. Một khi cài đặt xong, agent sẽ có giao diện đồ họa để cấu hình, mở log file hoặc start/stop service :</p>
</li>
</ul>
<p><img alt="wazuh" data-src="https://github.com/hocchudong/ghichep-SOC/raw/master/images/wazuh-13.png" class="lazyload"></p>
<p>Mặc định tất cả file agent được đặt tại : <code>C:\Program Files(x86)\ossec-agent</code></p>
<h2 id="2-Tien-trinh-registration-tai-agent"><a href="#2-Tien-trinh-registration-tai-agent" class="headerlink" title="2. Tiến trình registration tại agent"></a>2. Tiến trình registration tại agent</h2><p>Mỗi khi Wazuh  Agent gửi dữ liệu tới Wazuh Manager thông qua một phương thức an toàn là gọi OSSEC message protocol, phương thức này sẽ mã hóa message bằng pre-shared key. Lúc đầu khi bạn cài đặt thành công Wazuh Agent sẽ không thể kết nối với Wazuh Manager vì thiếu pre-shared key.</p>
<p>Quá trình <strong>registration</strong> bao gồm việc tạo 1 mối quan hệ tin cậy giữa Manager và Agent. Điều này có thể thực hiện bởi chính Manager hoặc với registration service, service này sẽ lắng nghe trên Manager. Một Agent có thể yêu cầu pre-shared key bằng việc sử dụng 1 số thông tin xác thực và nó sẽ phản hồi pre-shared key và lưu trữ Agent mới trên local database.</p>
<p>Một cách tiếp cận khác là sử dụng RESTful API.</p>
<ul>
<li>Agent keys</li>
</ul>
<p>Manager sử dụng file <code>/var/ossec/etc/client.keys</code> để lưu trữ registration record cho mỗi agent, bao gồm <code>ID</code>, <code>name</code>, <code>IP</code> và <code>key</code>. VD :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">001 Server1 any e20e0394dca71bacdea57d4ca25d203f836eca12eeca1ec150c2e5f4309a653a</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">002 ServerProd 192.246.247.247 b0c5548beda537daddb4da698424d0856c3d4e760eaced803d58c07ad1a95f4c</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">003 DBServer 192.168.0.1/24 8ec4843da9e61647d1ec3facab542acc26bd0e08ffc010086bb3a6fc22f6f65b</span></pre></td></tr></table></figure>

<p>Agent cũng có file <code>/var/ossec/etc/client.keys</code> chứa các registration record của riêng nó. VD với <code>Serrver1</code> agent :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">001 Server1 any e20e0394dca71bacdea57d4ca25d203f836eca12eeca1ec150c2e5f4309a653a</span></pre></td></tr></table></figure>

<ul>
<li>Basic data cho việc registing 1 agent</li>
</ul>
<p>Để register 1 agent, nó cần cung cấp tên và IP của agent :</p>
<p>Có 1 số cách để đặt agent IP :</p>
<ul>
<li><strong>Any IP</strong> : Cho phép agent kết nối từ bất từ IP nào. VD : <code>Server1</code> có <code>any</code> IP</li>
<li><strong>Fixed IP</strong> : Cho phép kết nối từ 1 IP chỉ định. VD : <code>ServerProd</code> có IP <code>192.246.247.247</code></li>
<li><strong>Range IP</strong> : Cho phép kết nối từ 1 range IP chỉ định. VD : <code>DBServer</code></li>
</ul>
<p>Một số phương thức registration tự động phát hiện IP của agent trong quá trình registration</p>
<h2 id="3-Register-cho-cac-Agent"><a href="#3-Register-cho-cac-Agent" class="headerlink" title="3. Register cho các Agent"></a>3. Register cho các Agent</h2><p>Trong phần này sẽ hướng dẫn cách register để giám sát các agent :</p>
<p><strong>Trên Manager server</strong> : </p>
<ul>
<li><p>Chạy lệnh <code>manage_agents</code> :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># /var/ossec/bin/manage_agents</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">****************************************</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">* Wazuh v3.2.1 Agent manager.            *</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">* The following options are available: *</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">****************************************</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">   (A)dd an agent (A).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">   (E)xtract key <span class="keyword">for</span> an agent (E).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">   (L)ist already added agents (L).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">   (R)emove an agent (R).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">   (Q)uit.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">Choose your action: A,E,L,R or Q:</span></pre></td></tr></table></figure>
</li>
<li><p>Chọn <code>A</code> để thêm 1 agent. Điền <code>hostname</code> và <code>IP</code> cho agent :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Choose your action: A,E,L,R or Q: A</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">- Adding a new agent (use <span class="string">'\q'</span> to <span class="built_in">return</span> to the main menu).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  Please provide the following:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">   * A name <span class="keyword">for</span> the new agent: Example</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">   * The IP Address of the new agent: 192.168.100.10</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">   * An ID <span class="keyword">for</span> the new agent[001]:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">Agent information:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">   ID:001</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">   Name:Example</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">   IP Address:any</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">Confirm adding it?(y/n): y</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">Agent added with ID 001.</span></pre></td></tr></table></figure>
</li>
<li><p>Chọn <code>E</code> để tạo ra 1 key mới :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Choose your action: A,E,L,R or Q: E</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">Available agents:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">   ID: 001, Name: Example, IP: any</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">Provide the ID of the agent to extract the key (or <span class="string">'\q'</span> to quit): 001</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">Agent key information <span class="keyword">for</span> <span class="string">'001'</span> is:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">MDAxIDE4NWVlNjE1Y2YzYiBhbnkgMGNmMDFiYTM3NmMxY2JjNjU0NDAwYmFhZDY1ZWU1YjcyMGI2NDY3ODhkNGQzMjM5ZTdlNGVmNzQzMGFjMDA4Nw==</span></pre></td></tr></table></figure>
</li>
<li><p>Exit với <code>Q</code></p>
</li>
</ul>
<p><strong>Trên Agent</strong> : </p>
<ul>
<li><p>Chạy <code>manage_agents</code> : </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># /var/ossec/bin/manage_agents</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">****************************************</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">* Wazuh v3.2.1 Agent manager.            *</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">* The following options are available: *</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">****************************************</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">   (I)mport key from the server (I).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">   (Q)uit.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">Choose your action: I or Q:</span></pre></td></tr></table></figure>
</li>
<li><p>Chọn <code>I</code> để import key, paste key đã sinh từ máy manager : </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">Choose your action: I or Q: I</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">* Provide the Key generated by the server.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">* The best approach is to cut and paste it.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">*** OBS: Do not include spaces or new lines.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">Paste it here (or <span class="string">'\q'</span> to quit): MDAxIDE4NWVlNjE1Y2YzYiBhbnkgMGNmMDFiYTM3NmMxY2JjNjU0NDAwYmFhZDY1ZWU1YjcyMGI2NDY3ODhkNGQzMjM5ZTdlNGVmNzQzMGFjMDA4Nw=</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">Agent information:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">   ID:013</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">   Name:Example</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">   IP Address:any</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">Confirm adding it?(y/n): y</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">Added.</span></pre></td></tr></table></figure>
</li>
<li><p>Ấn <code>Q</code> để thoát</p>
</li>
<li><p>Chỉnh sửa IP của server Manager tại file <code>/var/ossec/etc/ossec.conf</code> : </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">&lt;client&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">      &lt;server-ip&gt;MANAGE_IP&lt;/server-ip&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">&lt;/client&gt;</span></pre></td></tr></table></figure>
</li>
<li><p>Restart lại agent :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># /var/ossec/bin/ossec-control restart</span></span></pre></td></tr></table></figure>

</li>
</ul>
<p><strong>Chú ý</strong> : Register đè một agent </p>
<p>VD : Một agent tên là <code>Server</code> với IP 10.0.0.10 đã được install và có ID là 005. Giả sử agent được reinstall, chúng ta cần phải reinstall agent mới và kết nối lại với Manager. Sử dụng câu lệnh sau trên Manager : </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">/var/ossec/bin/manage_agents -n Server1 -a 10.10.10.10 -F 0</span></pre></td></tr></table></figure>

<h2 id="4-List-cac-agent-duoc-cai-dat-va-remove-agent"><a href="#4-List-cac-agent-duoc-cai-dat-va-remove-agent" class="headerlink" title="4. List các agent được cài đặt và remove agent"></a>4. List các agent được cài đặt và remove agent</h2><ul>
<li><p>List các agent đã register trên Manager :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># /var/ossec/bin/agent_control -l</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">Wazuh agent_control. List of available agents:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">   ID: 000, Name: vpc-ossec-manager (server), IP: 127.0.0.1, Active/Local</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">   ID: 1040, Name: ip-10-0-0-76, IP: 10.0.0.76, Active</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">   ID: 003, Name: vpc-agent-debian, IP: 10.0.0.121, Active</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">   ID: 005, Name: vpc-agent-ubuntu-public, IP: 10.0.0.126, Active</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">   ID: 006, Name: vpc-agent-windows, IP: 10.0.0.124, Active</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">   ID: 1024, Name: ip-10-0-0-252, IP: 10.0.0.252, Never connected</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">   ID: 1028, Name: vpc-debian-it, IP: any, Never connected</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">   ID: 1030, Name: diamorphine-POC, IP: 10.0.0.59, Active</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">   ID: 015, Name: vpc-agent-centos, IP: 10.0.0.123, Active</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">   ID: 1031, Name: WIN-UENN0U6R5SF, IP: 10.0.0.124, Never connected</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">   ID: 1032, Name: vpc-agent-ubuntu, IP: 10.0.0.122, Active</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">   ID: 1033, Name: vpc-agent-debian8, IP: 10.0.0.128, Active</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">   ID: 1034, Name: vpc-agent-redhat, IP: 10.0.0.127, Active</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">   ID: 1035, Name: vpc-agent-centos7, IP: 10.0.0.101, Never connected</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">   ID: 1041, Name: vpc-agent-centos-public, IP: 10.0.0.125, Active</span></pre></td></tr></table></figure>
</li>
<li><p>Remove agent với ID là 001 :</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment"># /var/ossec/bin/manage_agents -r 001</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">****************************************</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">* Wazuh v3.2.1 Agent manager.          *</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">* The following options are available: *</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">****************************************</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">   (A)dd an agent (A).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">   (E)xtract key <span class="keyword">for</span> an agent (E).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">   (L)ist already added agents (L).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">   (R)emove an agent (R).</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">   (Q)uit.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">Choose your action: A,E,L,R or Q:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">Available agents:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">   ID: 001, Name: new, IP: any</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">Provide the ID of the agent to be removed (or <span class="string">'\q'</span> to quit): 001</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">Confirm deleting it?(y/n): y</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">Agent <span class="string">'001'</span> removed.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">** You must restart OSSEC <span class="keyword">for</span> your changes to take effect.</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">manage_agents: Exiting.</span></pre></td></tr></table></figure>
</li>
<li><p>Login vào Wazuh Interface với IP : <a href="http://MANAGER_IP:5601" target="_blank" rel="noopener">http://MANAGER_IP:5601</a> và kiểm tra các agent đã register :<br><img alt="wazuh" data-src="https://github.com/hocchudong/ghichep-SOC/raw/master/images/wazuh-17.png" class="lazyload"></p>
<p><img alt="wazuh" data-src="https://github.com/hocchudong/ghichep-SOC/raw/master/images/wazuh-18.png" class="lazyload"></p>
</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined" target="_blank" rel="noopener">Eopi Noriko</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="/https:/eopi.loliteam.net/2019/12/05/Wazuh5/">https://eopi.loliteam.net/2019/12/05/Wazuh5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Wazuh/">Wazuh    </a><a class="post-meta__tags" href="/tags/SOC/">SOC    </a><a class="post-meta__tags" href="/tags/SIEM/">SIEM    </a><a class="post-meta__tags" href="/tags/IDS-IPS/">IDS/IPS    </a></div><div class="post_share"><div class="social-share" data-image="/img/wazuh.png" data-sites="facebook,twitter"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/12/05/docker1/"><img class="prev_cover lazyload" data-src="/img/docker.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Bài đăng trước</div><div class="prev_info"><span>1. Cài đặt docker engine cơ bản (Cài đặt môi trường lab)</span></div></a></div><div class="next-post pull_right"><a href="/2019/12/05/Wazuh4/"><img class="next_cover lazyload" data-src="/img/wazuh.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Bài tiếp theo</div><div class="next_info"><span>4. Thực hành cài đặt Wazuh Server</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/12/04/Wazuh/" title="1. Tổng quan giới thiệu về Wazuh"><img class="relatedPosts_cover lazyload"data-src="/img/wazuh.png"><div class="relatedPosts_title">1. Tổng quan giới thiệu về Wazuh</div></a></div><div class="relatedPosts_item"><a href="/2019/12/04/Wazuh2/" title="2. Kiến trúc và cơ chế hoạt động của Wazuh"><img class="relatedPosts_cover lazyload"data-src="/img/wazuh.png"><div class="relatedPosts_title">2. Kiến trúc và cơ chế hoạt động của Wazuh</div></a></div><div class="relatedPosts_item"><a href="/2019/12/04/Wazuh3/" title="3. Các usecase sử dụng của Wazuh"><img class="relatedPosts_cover lazyload"data-src="/img/wazuh.png"><div class="relatedPosts_title">3. Các usecase sử dụng của Wazuh</div></a></div></div><div class="clear_both"></div></div></div></div><footer id="footer" style="background-image: url(/img/wazuh.png)"><div id="footer-wrap"><div class="copyright">&copy;2019 By Eopi Noriko</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script async src="/js/search/local-search.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.15/dist/snackbar.min.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.7" zIndex="-1" mobile="true" data-click="true"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/click_heart.js"></script><script src="/js/third-party/ClickShowText.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Tìm Kiếm</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Tìm kiếm Bài viết"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>